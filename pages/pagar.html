<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cherry - Contas a Pagar</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/forms-styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../dashboard.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: white;">
                    <span class="cherry-icon">üçí</span>
                    <span class="brand-name">Cherry</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="pagar.html" class="nav-link active">Pagar</a></li>
                <li><a href="receber.html" class="nav-link">Receber</a></li>
                <li><a href="terceiros.html" class="nav-link">Terceiros</a></li>
                <li><a href="investimentos.html" class="nav-link">Investimentos</a></li>
                <li><a href="metas.html" class="nav-link">Metas</a></li>
                <li><a href="cadastros.html" class="nav-link">Cadastros</a></li>
            </ul>
        </div>
    </nav>

    <div class="container main-container">
        <header>
            <div class="header-content">
                <h1>Contas a Pagar</h1>
                <button class="add-btn" id="addBtn" onclick="openAddModal()">
                    Nova Conta a Pagar
                </button>
            </div>
        </header>

        <div class="page-actions">
            <div class="controls-container">
                <div class="sort-controls">
                    <label>Ordenar por:</label>
                    <select id="sortBy" onchange="sortAccounts()">
                        <option value="vencimento">Data de Vencimento</option>
                        <option value="pagamento">Data de Pagamento</option>
                        <option value="valor">Valor</option>
                        <option value="nome">Nome</option>
                    </select>
                </div>
                
                <div class="filter-controls">
                    <div class="filter-item">
                        <label>M√™s:</label>
                        <select id="filterMonth" onchange="filterAccounts()">
                            <option value="all">Todos</option>
                            <option value="1">Janeiro</option>
                            <option value="2">Fevereiro</option>
                            <option value="3">Mar√ßo</option>
                            <option value="4">Abril</option>
                            <option value="5">Maio</option>
                            <option value="6">Junho</option>
                            <option value="7">Julho</option>
                            <option value="8">Agosto</option>
                            <option value="9">Setembro</option>
                            <option value="10">Outubro</option>
                            <option value="11">Novembro</option>
                            <option value="12">Dezembro</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label>Ano:</label>
                        <select id="filterYear" onchange="filterAccounts()">
                            <option value="all">Todos</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label>Categoria:</label>
                        <select id="filterCategory" onchange="filterAccounts()">
                            <option value="all">Todas</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label>Status:</label>
                        <select id="filterStatus" onchange="filterAccounts()">
                            <option value="all">Todos</option>
                            <option value="a_pagar">A Pagar</option>
                            <option value="vencida">Vencida</option>
                            <option value="pago">Pago</option>
                        </select>
                    </div>
                    
                    <button class="clear-filters" onclick="clearFilters()">Limpar</button>
                </div>
            </div>
        </div>

        <div class="accounts-list" id="accountsList">
            <!-- Lista de contas ser√° carregada aqui -->
        </div>
    </div>

    <!-- Modal para adicionar conta -->
    <div id="addModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nova Conta a Pagar</h2>
                <button class="close-btn" onclick="closeAddModal()">&times;</button>
            </div>
            
            <form id="addAccountForm" class="modal-form">
                <div class="form-group">
                    <label for="nomeDespesa">Nome da Despesa</label>
                    <input type="text" id="nomeDespesa" required>
                </div>
                
                <div class="form-group">
                    <label for="categoria">Categoria</label>
                    <div class="category-input">
                        <select id="categoria" required>
                            <option value="">Selecione uma categoria</option>
                        </select>
                        <button type="button" class="add-category-btn" onclick="showNewCategoryInput()">+</button>
                    </div>
                    <div id="newCategoryInput" class="new-category-input" style="display: none;">
                        <input type="text" id="novaCategoria" placeholder="Nova categoria">
                        <button type="button" onclick="addNewCategory()">Adicionar</button>
                        <button type="button" onclick="hideNewCategoryInput()">Cancelar</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="valor">Valor</label>
                    <input type="number" id="valor" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label for="vencimento">Data de Vencimento</label>
                    <input type="date" id="vencimento" required>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="isCartaoCredito" onchange="toggleCartaoOptions()">
                        Cart√£o de Cr√©dito
                    </label>
                </div>
                
                <div id="cartaoOptions" class="cartao-options" style="display: none;">
                    <div class="form-group">
                        <label>Tipo de pagamento:</label>
                        <div class="radio-group">
                            <label><input type="radio" name="tipoCartao" value="vista" checked> √Ä vista</label>
                            <label><input type="radio" name="tipoCartao" value="parcelado"> Parcelado</label>
                        </div>
                    </div>
                    
                    <div id="parcelasGroup" class="form-group" style="display: none;">
                        <label for="numeroParcelas">N√∫mero de parcelas</label>
                        <input type="number" id="numeroParcelas" min="2" max="24">
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="cancel-btn" onclick="closeAddModal()">Cancelar</button>
                    <button type="submit" class="save-btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para registrar pagamento -->
    <div id="paymentModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Registrar Pagamento</h2>
                <button class="close-btn" onclick="closePaymentModal()">&times;</button>
            </div>
            
            <form id="paymentForm" class="modal-form">
                <div class="form-group">
                    <label for="dataPagamento">Data do Pagamento</label>
                    <input type="date" id="dataPagamento" required>
                </div>
                
                <div class="form-group">
                    <label for="formaPagamento">Forma de Pagamento</label>
                    <select id="formaPagamento" required>
                        <option value="">Selecione a forma</option>
                        <option value="dinheiro">Dinheiro</option>
                        <option value="cartao_debito">Cart√£o de D√©bito</option>
                        <option value="cartao_credito">Cart√£o de Cr√©dito</option>
                        <option value="pix">PIX</option>
                        <option value="transferencia">Transfer√™ncia</option>
                        <option value="boleto">Boleto</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="cancel-btn" onclick="closePaymentModal()">Cancelar</button>
                    <button type="submit" class="save-btn">Salvar Pagamento</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para confirmar exclus√£o -->
    <div id="deleteModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Confirmar Exclus√£o</h2>
                <button class="close-btn" onclick="closeDeleteModal()">&times;</button>
            </div>
            
            <div class="modal-form">
                <p id="deleteMessage">Tem certeza que deseja excluir esta conta?</p>
                
                <div id="parcelasOptions" style="display: none;">
                    <p><strong>Esta √© uma conta parcelada.</strong></p>
                    <div class="radio-group">
                        <label><input type="radio" name="deleteType" value="single" checked> Excluir apenas esta parcela</label>
                        <label><input type="radio" name="deleteType" value="all"> Excluir todas as parcelas desta compra</label>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="cancel-btn" onclick="closeDeleteModal()">Cancelar</button>
                    <button type="button" class="save-btn" onclick="confirmDelete()">Excluir</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>¬© Cherry, 2025. Feito com ‚ô• em Minas Gerais.</p>
        </div>
    </footer>

    <script src="../assets/js/pagar-script.js"></script>
</body>
</html>